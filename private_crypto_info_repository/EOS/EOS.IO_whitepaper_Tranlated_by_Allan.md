
# EOS.IO技术白皮书

**2018年3月16号**

**摘要：**EOS.IO软件引入了一个新的构架，为去中心应用的横向和纵向扩展设计。通过建立一个类似于操作系统的，可以在上面建立应用的。软件提供了账户，验证，数据库，异步通信和在不同CPU核心和集群的应用的时序安排。作为结果的技术是一个可能最后拓展到每秒百万次交易的区块链构架，去除用户付费，允许快速简单的去中心化的应用的部署和维护，在治理的区块链的情况下。

**请注意： 白皮书中所提到的加密代币是指采用EOS.IO软件启动的区块链上的代币。他们不是指在ETHEREUM上发行的和EOS代币发行有关的ERC-20兼容代币**

Copyright © 2018 block.one

不需要需要，任何人都可以使用，复制或分发白皮书中的任何内容用于非商业的和教育用途（除了对于商业目的收费），如果原始来源和适用的版权被引用。


**免责声明：**EOS.IO白皮书V2仅用于信息目的。block.one不保证达到白皮书中结论的精确性。这个白皮书提供“不予改变”。block.one不做和清楚地拒绝所有代表和保证，表达，意味着，法定或其他,无论怎样,包括，但不限于：(i)可销性，特定的适合性，相配，用途，权利或非侵权的保证; (ii)白皮书内容没有错误。(iii) 这些内容不会侵犯第三方权力。block.one和它的附属公司不承担任何由使用引起的损失，关于，依靠白皮书或任何本文中包含的内容，即使通知了损害的可能性。在任何情况下，block.one和其附属公司不对任何个人或组织的任何损害，损失，债务，成本和各种花费负责，直接的或间接的，间接的，补偿的，偶然的，实际上的，典范的，惩罚性的或特殊使用，关于，或依赖白皮书，或本文中包含的任何内容，包括，没有限制，任何商业损失，收入，利润，数据，使用，商誉或其它无形的损失。

## 背景

区块链技术在2008随着比特币货币发起而提出，从那时以来，企业家和开发者尝试推广技术在单个区块链上支持更广范围的应用。当许多区块链平台努力去支持功能性去中心化应用，特定应用的区块链，比如BitShares（2014）和Steem 社交媒体平台（2016）称为大量的使用的区块链，由成千上万的日活用户。他们通过把性能增加到每秒数千笔交易的性能和将延迟减少到 1.5秒，去掉交易费完成这个，提供类似于现有中心化服务的用户体验。现有的区块链平台受累于交易费和阻止区块链广泛采用的计算能力。

## 区块链应用的需求

为了获得更广泛的应用，区块链上的应用要求一个平台足够灵活的满足如下要求：

### 支持成千上的用户

和eBay, Uber, AirBnB,和Facebook的商业竞争，要求区块链可以处理数千万的日活用户。在某些情况下，一个应用工作不起来除非由大量的用户。所以，一个可以处理非常大量用户的平台是最重要的。

### 免费使用

应用开发这需要给用户提供免费服务的灵活性；用户不需要支付去使用平台活从服务中获利。一个对用户使用免费的区块链平台可能获得更广泛的采用。开发者和商业然后建立一个有效的货币化策略。

### 建议升级和BUG修复

商业建立基于区块链的应用需要给他们应用增加特征的灵活性。这个平台必须支持软件和只能合约升级。

所有非平凡的软件都会有BUG,即使最严格的正式验证。这个平台需要足够强健的去修复BUG，当它们不可避免的发生时。

### 低延迟

一个好的用户体验需要再不超过几秒钟的时间里给一个可信赖的反馈。更长的延迟会让用户挫败，让在区块链上建立的应用相比现有的非区块链方案竞争力更弱。平台必须支持低延迟的交易。

### 连续效能

有一些不能实施在并行机制的的应用，由于连续依赖的步骤。像交易所这样的应用需要连续效能去处理大量的交易。因此，平台必须支持快速的连续效能。

### 并行性能

大规模的应该需要把工作量划分到多个 CPU和电脑。

## 共识机制(BFT-DPOS)

EOS.IO软件使用被直到的被证明唯一能满足区块链应用的性能要求的去中心化共识机制，Delegated Proof of Stake (DPOS)。在这个机制下，持有采用 EOS.IO软件的区块链上的代币可能选择区块生产者，通过一个连续批准投票系统。如果它们能说服代币持有者给它们投票，任何人都可以选择参加区块生产，会被给予生产区块的的机会。

EOS.IO软件使得精确地每0.5秒生产一个区块，精确的一个生产者被授权及时地在任何时间点生产区块。如果区块没有在预定的时间被生产出来，那个时间位置的区块被跳过。当一个或多个区块被跳过，那就有0.5秒或更多的间隙在区块链里。

使用EOS.IO软件，每一轮生产126个区块（每个6个区块，乘以21个身生产者）。在每一轮的开头，21个独特的区块生产者由代币持有者的投票偏好选择。被选中的生产者按照15或更多生产者同意的顺序安排。

如果一个区块生产者丢失一个区块，并且最近24小时没有生产任何区块。它们将会从考虑中移除，直到它们打算的区块链重新准被生产区块。通过不安排已被证明不可靠的生产者去最小化丢块数量，确保网络流畅运行。

正常情况下，一个DPOS区块链不会经过任何分叉，因为区块生产者合作生产区块，而不是竞争。如果发生分叉，共识将会自动转到最长的链。这个方法可行，因为区块被加到一个区块链分叉的比例直接和共享相同共识的区块生产者的比例相关。也就是说，一个有更多区块生产者支持的区块链分叉在长度上回增长的更快，相比更少区块生产者支持的，因为更多区块生产者支持的分叉将会经理更少的丢块。

此外，没有区块生产者应该同时在两条分叉上生产区块。一个区块生产者被发现这么做，就会被投票出来。双重生产的加密证据也会用来自动移除滥用者。

拜占庭容错被加到了传统的DPOS,通过允许所有区块生产者签署所有区块，只要没有区块生产者签署带有相同时间戳的两个区块，或者相同区块高度的两个区块。一旦15个生产者签署了区块，就被视为不可撤销。一个拜占庭的生产者必须生产它们签署带有相同时间戳或相同区块高度的区块的不忠的证据。在这个模型下，共识可以在1秒里达成。

### 交易确认

典型的DPOS区块链拥有100%区块生产者参与。在广播后平均0.25秒，一个交易可被认为99.9%确定的确认。

除了DPOS之外，EOS.IO增加了异步拜占庭容错（aBFT），为了完成更快的不可撤销。aBFT机制在1秒里提供100%不可撤销的确认。

### 作为权益证明的交易(TaPoS)

EOS.IO软件要求每笔交易去包含最近区块头的部分哈希。这个哈希有两个目的：

1. 防止在没有包含引用区块的分叉上进行交易重放 和

2. 法信号给网络：一个特别的用户和它们的抵押在一个特定的分叉上

随着时间的过去,所有用户以直接确认区块链结束，使得很难伪造假链，因为假冒的不能从合法链上迁移交易。

## 账户

 EOS.IO软件许可所有账户由一个长度最多12位的独一无二的人可读的命名引用。名字由账户的建立者选择。账户建立者必须拥有所需的RAM去存储新账户，直到新账户抵押代币拥有自己的RAM。
 
 在一个去中心化的背景里，应用开发者将支付注册新用户的账户创建的名义上的成本。
 
 传统商业在每个它们通过广告，免费服务得到的每个用户支付了大量的钱。相比之下，投资新区块链账户是不多的。幸运的是，不需要给已经在其它应用注册的账户建立账户。
 
### 行动 & 处理者

每个账户都可以发送结构化的行动给其它账户，并可能定义脚本去处理行动，当它们被修改。EOS.IO 软件给每个账户自己的私有数据库，只能由自己的行动处理者访问。行动处理脚本也可以给其它账户发送行动。行动的组合和自动行动的处理者是EOS.IO如何定义智能合约的方式。

为了支持并行操作，每个账户可以在它们的数据库里定义任何数量的作用域。区块生产者会用这样的方式安排交易，，内存访问作用域没有冲突，因此它们可以被并行执行。

### 基于角色的许可管理

许可管理涉及决定一个行动是否由合适的授权。许可管理最简单的形式是检查一笔交易是否由需要的签名。这意味着需要的签名是已知的。通常，授权一定要个体或个体的组织，经常是分开的。EOS.IO 软件提供一个说明的许可管理系统，给账户好的颗粒和高阶的控制，谁能做什么以及何时。

证明和许可管理必须是标准化的，并从应用的商业逻辑分离的，这是很关键的。这让工具开发去管理授权以一般用途的方式，也为性能优化提供重要的机会。

每个账户可能由其它账户的加权组合和私钥控制。这建立了一个分层的授权结构，反应了实际上许可是如何被组织的，让多重用户比以前更容易控制账户。多重用户控制是对安全贡献最大的贡献者，并且，当合适的使用，可以减少由于黑客的失窃。

EOS.IO软件允许账户定义私钥组合 和/或 账户能发送一个特别的动作类型到另外一个账户。例如，能有一个用于社交媒体的账户的私钥，另外一个用户访问交易所。甚至能给另外以恶搞账户许可去以用户账户名义行动，不赋予它们私钥。

#### 命名的许可层级

使用EOS.IO软件，账户能定义命名的许可层级，从更高层级的名的许可里派生出来。每个命名的许可层级定义一个授权；授权是一个入口多重签名检查，包含私钥和/或其它账户的许可层级。例如，一个账户的“朋友”许可可以为账户里的一个行为设置，被任何账户的“朋友”等价的控制。

另外一个例子是 Steem区块链，有三个硬编码命名许可层级：拥有者，激活者，发帖者，发帖权限智能执行社交活动，例如投票和发帖，激活者拥有除了改变所有者的所有权限。拥有者权限意味着用于冷存储，可以做任何事。EOS.IO软件推广这个概念，允许每个账户拥有者定义它们自己的层级和行动组。

![](https://raw.githubusercontent.com/gdkr100/Writing_Public/master/pictures/eos_white_paper/1_Named_Permission_Levels.png)

#### 许可映射

EOS.IO软件允许每个账户在合约或任何其它账户的合约和行动和它们拥有的命名许可层级之间定义一个映射。例如，一个账户的持有者可以映射账户拥有着的社交媒体应用到账户持有者的“朋友”许可组。用这个映射，任何朋友可以在账户持有者的社交媒体上以账户持有者的名义发帖。虽然它们可以以账户所所有者的身份发帖，它们仍然使用它们自己的私钥去签署这个行动。这意味着，总是可以识别出哪个朋友用了这个账户，以什么方式。always possible to identify which friends used the account and in what way.

#### 评估许可

当从**@alice**发送给**@bob**一个 **"Action"**类型的行为, EOS.IO软件首先检查**@alice**是否为**@bob.groupa.subgroup.Action**定义了一个许可映射。如果没找到，然后一个对**@bob.groupa.subgroup**的映射，然后对**@bob.groupa**的映射，最后**@bob**被检查。如果没有进一步的匹配被找到，然后假设的映射会到命名许可组** @alice.active**。

一旦一个映射被辨认，然后签名授权有效，然后使用入口多重签名过程和命名许可联系的授权。如果失败了，它就会穿过父许可，最后到所有者许可，**@alice.owner**。

![](https://raw.githubusercontent.com/gdkr100/Writing_Public/master/pictures/eos_white_paper/2_Evaluating_Permissions.jpg)

##### 默认许可组

EOS.IO即使也允许所有账户有一个可以做所有事的"owner"组，一个"active" 组可以做除了改变"owner"组的所有事情。所有其它的许可都是从"active"中派生出来的。

##### 并行许可检验

许可检验过程是只读的，由交易所做的对许可的更改在区块尾之前不会生效。这意味着对所有交易的私钥和许可检查可以并行处理。此外，这意味着，在不需要开始昂贵的需要回滚的应用逻辑的情况下，一个快速的许可验证时可能的。最后，这意味着交易许可可以被评估，当收到了等待的交易，当它们被应用时不需要重新检验。

作为考虑的事情，许可验证代表需要验证交易的计算的很打比例。使其只读，和并行处理，可以在性能上有极大的提升。

当重放区块链从行为日志里重新生成确定性的状态，不需要再次验证许可。包含在一个已知的好的区块里的交易的事实足够可以跳过这一步。这个可以显著的减少和一个从放曾经增长的区块链的计算负担。

### 强制延迟的行为

时间是安全的关键部分。在大部分情况下，不可能知道一个私钥是否被盗，直到它被使用。基于时间的安全甚至更加重要，当人们有应用，需要把私钥保存在链接在互联网的计算机上用于日常使用。EOS.IO软件可以让应用开发者能够指示一定的行为，不许等最小的一段时间，在他们被包含在区块里之后，在执行之前。在这段时间里，他们可以被取消。

### 被盗私钥恢复

EOS.IO软件给用户提供一个恢复对他们的账户的控制，当私钥被盗后。一个账户拥有者可以用任何最近30天活跃的拥有者私钥，和来自他们指定的账户回复方的许可，去重设他们账户的拥有者私钥。账户恢复方不能重置账户控制，如果没有拥有者的帮助。

尝试通过恢复过程，黑客会一无所获，因为他们已经“控制”了账户。此外，如果他们确实通过这个过程，恢复方可能需要身份证认证和多因素证明（电话和电子邮件）。这可能违背这黑客，或者让黑客在这个过程中一无所获。

这个过程也和简单的多重签名安排不同。用一个多重签名交易，另外一个实体会让一方到执行的每笔交易。相比之下，在恢复过程中，恢复方仅仅是恢复过程的乙方，对日常交易没有权限。这显著的减少了当中每一方成本和法律责任。

## 应用确定性的并行执行

区块链共识依赖于确定性的（可重复的）行为。这意味着所有的并行执行不能使用互斥体或其它锁定基元。没有锁定，必须有一些方法交易能并行执行，但不创建非确定性的结果。

EOS.IO软件2018年6月发行版将运行单线程。然而，它包含未来多线程，并行运行所需要的必要的数据结构。

在一个基于EOS.IO软件的区块链上，一个并行运行成为可能，组织行为传递到独立的分片将是区块生产者的工作，这样他们就能校验并行。这个计划表是一个区块生产者的输出，将确定地执行，但生成这个时间表的过程不是确定的。这意味着区块生产者可以使用并行机制去安排交易。

并行执行的一部分意思是，当一个脚本生成一个新的行为，它不会被立即发送，而是被安排在下一轮中发送。不能立即发送的原因是因为可能在另外一个分片中活跃的修改它自己的状态。

### 最小化通信延迟

延迟是一个账户发送一个行为到另外一个账户，然后收到一个回复所花费的时间。目标是让两个账户来回交换行为，在一个区块里，在每个行为之间不需要等0.5s 。去实现这个，EOS.IO 软件把每个区块划分为若干周期。每个周期被划分成分片，每个分片包含一个交易列表。每笔交易包含一组被发送的行为。这个结构可以想象成一个树，当交替层循序的并行处理。

```
  Block

    Region

      Cycles (sequential)

        Shards (parallel)

          Transactions (sequential)

            Actions (sequential)

              Receiver and Notified Accounts (parallel)
```

在一个周期内生成的交易可以在任意的随后的周期和区块发送。区块生产者将会保存增加周期到区块里，直到超过最大墙钟时间，或者没有新的生产的交易要发送。

可以用区块的静态分析去验证，在一定的周期内，没有两个分片包含修改相同账户的交易。只要维持一个不变量，可以通过并行运行分片的方法处理区块。

### 只读行动处理者

一些账户可能在一个过去/失败的基础上处理一个行动，不需要修改他们的内部状态。如果是这种情况，这些操作者可以被并行执行，只要对一个特定账户的仅仅只读行为处理者在一个周期内包含在一个或多个分片内。

### 多重账户的原子交易

有时，能够确保行动被发送，并由多重账户原子地接受。在这种情况下，两个动作会被放进一个交易。两个账户将会被赋予想用的分片，动作循序的进行。

### 区块链状态的局部验证

扩展区块链需要部件模块化。每个人不应该必须运行所有的东西，特别是如果他们只需要用应用的一小部分子集。

一个交易所应用开发者运行全节点的目的是向它的用户展示交易所状态。这个交易所应用不需要对和社交媒体应用相关的状态。EOS.IO软件允许任何全节点去运行应用的任何子集。发送给其它应用的行为被安全的忽略，如果你的应用从来都不需要依赖其它合约的状态。

### 个人的最优努力安排

EOS.IO软件不会让区块生产者负有发送任何行为到任何账户的责任。每个区块生产者制定他们自己的计算复杂度尺寸和需要处理一笔交易的时间。这个适用于不管是由一个用户生成的一笔交易，还是由一个智能合约自动生成的。

在一个采用EOS.IO软件发起的区块链，在网络层面所有的交易会开一个基于执行的WASM指示数量的计算带宽成本的账单。但是，每个独立的使用这个软件的区块生产者可能用他们的算法和测量去计算资源使用。当一个区块生产者得出结论，一笔交易或一个账户不成比例的消耗了不成比例的计算能力，他们简单地在他们生产他们自己的区块时，拒绝这个交易；但是，他们任然处理这笔交易，如果其它区块生产者认为它是有效的。

一般而言，只要甚至一个区块生产者认为交易有效，并且低于资源使用限制，然后所有其它区块生产者也会接受它，但是它可能花费高达一分钟为这笔交易寻找那样的生产者。

有时候，一个生产者可能创建一个区块，包含交易，按照量级顺序，超出接受的范围。在这样的情况，下一个区块生产者选择拒绝区块，链接会被第三方生产者打破。这和如果一个大区块导致网络传播延迟所发生的没有什么不同。社区会注意到滥用模式，并且最终移除欺诈节点的投票。

计算成本的主观评估使得区块链免于必须精确地确定地衡量一些事情需要多长时间去运行。这样的设计，使得不需要精确地计算指令。会显著的增加优化机会，不需要打破共识。

### 延期的交易

EOS.IO软件支持被安排在未来执行的延期交易。这使得计算可以移到不同的分片 和/或 创建长期运行的进程，持续的安排一个持续交易。

### 不依赖环境的行为

不依赖环境的行为涉及只依赖交易数据的，而不依赖于区块链状态的计算。签名验证，比如，是一个计算，只需要交易数据和一个决定签署交易的公钥的签名。这个一个区块链必须执行的最昂贵的个体计算之一，但是因为这个计算是不依赖于环境的，所以可以并行执行。

不依赖环境的行为像其它用户行为，除了他们缺乏访问区块链状态去执行验证。不仅使得EOS.IO能处理不依赖环境的行为，比如并行的签名验证，而且更重要的是，这使得能推广签名验证。

在不依赖环境的行为的支持下，扩展技术，比如分片，雷电， 等离子体，状态渠道或其它的，变的更平行和实际。这个发展使得有效的区块链间的交流，和潜在的无限扩展成为可能。


## 代币模块和资源使用

**请注意： 白皮书中所提到的加密代币是指采用EOS.IO软件启动的区块链上的代币。他们不是指在ETHEREUM上发行的和EOS代币发行有关的ERC-20兼容代币**

所有的区块链资源都是受约束的，需要一个系统避免滥用。一个使用EOS.IO软件的区块链，有三个显著的应用耗费的资源等级：

1. 带宽和日志存储（DISK）

2. 计算和计算积压的工作(CPU)；和

3. 状态存储（(RAM)）

计算和带宽有两个部件，即时使用和长期使用。一个区块链维护一个所有行动的日志，这个登录是无限制存储，并被所有全节点下载。用行为日志，可以重建所有应用的状态。

计算债是必须执行从行动日志里重新生成状态的计算。如果计算债变的过大，就有必要做一个区块链状态的快照，并抛弃区块链的历史。如果计算债增长过快，它可能花6个月去重放一年价值的交易。这很重要，所以计算债需要小心的管理。

区块链状态存储是从应用逻辑进入的信息。它包含像订单本和账户余额的信息。如果状态从来没有被应用读取过，那么它就不应该被储存。例如，博客内容和评论不被应用逻辑读取，所以他们就不应该存储到区块链状态里。同时，已有的帖子和评论，投票的数量，和其它属性不应该作为区块链状态的一部分被存储。

区块生产者发布他们所能提供的带宽，计算和状态。EOS.IO软件允许每个账户消耗一定比例的已有能力，按照在三天抵押合约里的代币数量比例来。例如，如果一个基于EOS.IO软件的区块链发行，如果一个账户持有1%的这个区块链上的可分配的总代币，那么这个账户可能使用1%的状态存储能力。

在一个发布的区块链上采用EOS.IO软件，意味着带宽和计算能力是基于部分储备金来分配的，因为他们是短暂的（未使用的能力不能储备起来供未来使用）。EOS.IO软件所使用的算法和Steem所用的速率限制带宽使用的算法类似。代表性的做法是由区块生产者通过写一个定制插件来实施。


### 客观的和主观念的衡量

正如之前讨论的，测量计算使用在性能和优化方面有一个重要的影响。因此，所以的资源使用约束根本上是主观的。是由区块生产者根据他们个体的算法和估算实施。

即便如此，有一些事情客观衡量是不重要的。 EOS.IO s软件使得区块生产者采用相同的算法，对这些客观的衡量。但是可能选择更严格的主观算法，对主管的衡量。

### 接收者支付

习惯上，是由支付办公空间，算力和其它运行生意所需要的成本运行生意。客户从商业公司那购买特定的商品，销售商品所得收入用于覆盖商业操作成本。类似地，没有网站需要它的访问者去进行微支付去访问网站，以去覆盖主机成本。因此，去中心化应用不应该强制它的客户直接支付给区块链，去使用区块链。

用EOS.IO软件启动的区块链不需要它的用户为它的使用直接付费给区块链。因此它不会束缚或阻止商家为它的产品决定它自己的货币化策略。

接收者也是可以支付的，EOS.IO使得发送者可以支付带宽，计算和存储。这允许应用开发者选择对他们应用最好的方法。在许多情况下，发送者支付显著的为不想实施他们自己的定量配给系统的应用开发者减少了复杂度。应用开发者给他们的用户授权带宽和计算，然后让发送者支付模型执行使用。从终端用户的角度看，是免费的。但是从区块链角度看，它是发送者支付。

### 授权能力

采用EOS.IO软件发起的区块链上的代币持有者，没有即时的需求去消耗已有带宽的部分或全部，可以授权或出租为消耗的带宽给别人。在这样的区块链上运行EOS.IO软件的区块生产者将承认能力授权，并相应地分配带宽。

### 从代币价值里拆分交易成本

EOS.IO软件其中一个重大好处是，一个应用所能用的代币数量完全和任何代币价格独立。如果一个应用所有者在一个采用EOS.IO的区块链上拥有相关数量的代币，那么这个应用可以无限期地在一个固定的状态和带宽使用的情况下运行。在这种情况下，开发者和使用者不受代币市场上的价格波动的影响，因此不依赖于价格喂养。换句话说，一个采用EOS.IO软件的区块链使得区块生产者自然地增加带宽，计算和存储，每个代币所有的，独立于代币价值。

采用EOS.IO软件的区块链奖励区块生产者代币，当他们每生产一个区块。代币的价值将影响一个区块生产者所能承担购买的带宽，存储和计算的数量；这个模型自然的利用提升的代币价格去增加网络性能。

### 状态存储成本

当带宽和计算被授权，应用状态的存储将要求应用开发者持有代币，直到状态被删除。如果状态从来每被删除，那么代币将有效的从流通中移除。

### 区块奖励

采用EOS.IO软件的区块链将奖励新的代币给区块生产者，当他们每次每生产一个区块。在这种情况下，创建的代币数量由所有区块生产者发布的所要求支付的中位数决定。EOS.IO软件可能配置去设置一个生产者奖励的硬顶，总的年代币增长供应不超过5%。

### 工人提议系统

除了选取区块生产者之外，根据基于EOS.IO软件的区块链，代币持有者可以选举一些设计用来使社区获利的工人提议。获胜的提议将收到代币，代币通胀的设置比例减去付给区块生产者的代币。这些提议将收到代币，与每个应用从代币持有者那收到的投票成比例，直到他们要求执行他们工作的数量。已被选举的提议可以由代币持有者新选出来的提议替代。

实施工人提议的合约系统可能不会在2018年6月的最初启动存在，但是将为机制提供资金。在区块生产者奖励开始的同时，它将累计资金。因为工人提议系统将会WASM中实施，它将会在不分叉的情况下晚点增加。

## 治理

治理由社区处理：

1. 在不能完全由软件算法捕获的共同行动的主观事务上达成共识

2. 执行他们达成的决定，和

3. 通过宪法修正案，更改他们自己的治理规则

基于EOS.IO软件的区块链实施一个治理过程，有效地管理区块生成者已有的影响。清晰的治理过程缺席，先前的依赖于临时的，非正式的，经常由争议的，导致不可预测结果的治理流程。

基于EOS.IO软件的区块链承认由把权力授权给区块生产者的代币持有者发起的权力。区块生产者被给予有限的被核查的权力，去冻结账户，更新由缺陷的应用，对底层协议提议硬分叉变更。

嵌入到EOS.IO软件的是区块生产者的选择。在对区块链的任何改变生效之前，这些区块生产者必须批准它。如果区块生产者拒绝进行代币持有者希望的改变，他们可以把它投票出去。如果区块生产在没有得到代币持有者许可的情况下进行改变，那么所有其它非生产的全节点验证器（交易所等）将拒绝这个改变。

### 冻结账户

有时，智能合约表现出异常或出乎意料的方式，或者没有如预想的那样执行。其他时间，一个应用或账户可能发现一个剥削，使得它可以消耗不合理数量的资源。当这类事情不可避免地发生了，区块生产者由权力改正这种情况。

所有区块链上的区块生产者有权选择把哪些交易包含在区块里，这给了他们冻结账户的能力。采用EOS.IO软件的区块链使这个权力正式化，通过执行冻结账户的过程，15/21个活跃生产者的账户的投票。如果生产者滥用权力，他们可以被投票出去，账户会被解冻。

### 改变账户代码

当所有其它的失败，一个“无法停止的应用”以不可预料的形式行动，使用 EOS.IO软件的区块链允许区块生产者替换账户代码，不需要对整个区块链硬分叉，和冻结账户的过程类似代码的替代需要选举出来的生产者的15/21的投票。

### 宪法

EOS.IO软件使得区块链建立一个服务协议或有约束力的合同的点对点的方式，在那些签署它的用户。被提及为“宪法”。宪法内容定义了用户的义务，不能完全由代码实施，帮助争议解决，通过建立审判权和法律选择，和其它互相接受的规则一起。网络上的每个交易广播必须体现宪法的哈希，作为签名的一部分，明确地把和签名者和合约绑定在一起。

宪法也定义可读的源代码协议目的。这个目的是用来识别一个BUG和一个错误发生时的不同，指导社区哪些修理时合适的或不合适的。

### 升级协议和宪法

EOS.IO软件通过协议定义如下流程，由它的公认的源代码和宪法定义，可以被更新：

1. 区块生产者提议一个宪法改变，并获得15/21 的批准。

2. 区块生产者维持对新宪法的15/21的批准连续30天

3. 所有的用户被表明接受新宪法，是未来交易被执行的条件

4. 区块生产者采用源代码的变化去反映宪法的变化，对区块链提议使用新宪法的哈希

5. 区块生产者维持对新代码的15/21的批准连续30天

6. 代码的改变7天后生效，给非生产的节点一个星期去升级，在源代码被批准后

7. 不升级到新代码的所有节点自动关闭

默认方式是，EOS.IO软件的配置，区块链更新去增加新特性的过程需要2~3个月，当更新去修复非关键的不需要改变宪法的BUG可能需要1~2个月

#### 紧急变更

区块生产者可能加速这个过程，如果软件变更是用来修复一个有害的BUG或安全漏洞，正在活跃的损害用户。一般而言，加速升级去引用新特性或者修复有害的BUG是违宪的。

## 脚本 & 虚拟机器

EOS.IO软件是第一个最先的配合发送已验证信（调用行为）息到账户的平台。脚本语言和虚拟机器的详情是实现特定的详情，大部分独立于EOS.IO技术的设计。任何语言或虚拟机，可以确定地，合适地沙盒化充分的平台，可以通过EOS.IO软件的API集成 .

### 模式定义行动

在账户间发送的所有行动由一个模式决定，是区块链共识状态的一部分。这个模式允许行动的二进制和JSON形式之间无缝的转换。

### 模式定义的数据库

数据库状态也用一个类似的模式定义。这确保由应用存储的所有数据是以这样的一个形式存在，可以解释为可读的JSON,但是用二进制的效率存储和操控。

### 未注册的多索引数据库API

开发智能合约需要一个清晰的数据库模式去跟踪，存储和查找数据。开发者通常需要由多字段存储和索引的相同的字段，并在所有的目录中维持一致性。

### 从应用中分离验证

为了最大化并行机会，最小计算债，从交易日志里重新生成应用状态相关的，EOS.IO把验证逻辑分到三个部分:

1. 验证一个行为内在一致性

2. 验证所有前提的有效性，和

3. 修改应用状态

验证行动的内在一致性是只读的，不需要访问区块链状态。这意味着它可以最大化并行执行。验证前提，比如需要的余额，是只读的，因此也可以得益于并行。只有应用修改需要写访问，必须循序的为每个应用处理。

验证是验证一个行动可以被应用的只读的过程。应用实际上在做这个工作。实时的，两者计算需要被执行，但是一旦一个交易被包含在区块链里，就不再有必要去执行验证操作。

## 埋葬区块链通信

EOS.IO软件被设计为实施埋葬区块链通信。这通过使得生成行动存在证明和行动序列证明更容易来完成。这个和应用构架结合，围绕行动传输，使得区块链间通信详情和验证证明可以对应用开发者隐藏。使得给应用开发这呈现更高级的抽象。

### 轻客户验证 (LCV)的默克尔证明

和其它区块链结合会更加容易，如果客户不需要处理所有交易。毕竟，交易所只在乎转入和转出交易所，没有更多东西。也是理想的，如果交易所链可以使用存款的轻量级默克尔证明，而不是完全必须信任它自己的区块生产者。至少，一个链的区块生产者想维持最小的可能的经营支出，当和其它区块链同步。

LCV的目标是相关轻量级存在证明的代，可以由任何跟踪相关的轻量级数据集合。假若这样，目标是为了证明一笔特定的交易被包含在一个特定的区块里，并且区块被包含在一个特定区块链的验证历史里。Bitcoin支持交易验证，假定所有节点访问区块头的全历史，每年区块头的数量是4MB.每秒10笔交易，一个有效的证明需要 512 字节。这对一个10分钟区块间隔区块链由用，但是对一个0.5s区块间隔的区块链不再有用。

EOS.IO软件使得对于任何人的轻量级证明，有任何不可逆的区块头，在交易被包含的时间点后。使用哈希链接结构显示，用一个小于1024字节的证明，能证明任何交易的存在。

考虑到区块链中一个区块的任何区块ID,并且区块有信任不可逆的区块。能够证明这个区块被包含在区块链里。证明通过取整（log2(N)）为它的路径摘要。 N是链中的区块数。给定的 SHA256的摘要方法，你可以证明任何链上的区块存在，在864字节里包含1亿交易。

经营费用只增长一点点，和带有生产合适的哈希链接去实现这些证明的区块，这意味着，没有理由不去用这种方式生成区块。

当是时候在其它链上验证证明时，可以做更多种类的时间/空间/带宽优化。跟踪所有的区块头（420 MB/year）将使得证明比较小。仅跟踪最近的区块头可以在最小化长期存储和证明尺寸之间达成一个权衡。或者，一个区块链可以用一个懒惰的验证方式，记住过去的证明的中间哈希。新的证明仅需要包含到所知的简单的树的链接。所用的准确的方式必须依赖外来区块的的比例，包含由默克尔证明引用的交易。

在一定的互联性密度后，会变得更高效，仅仅有一个包含其它链的整个区块历史的链，一起去掉对证明的需要。因为性能的原因，理想的是最小化跨链证明的频率。

### 跨链通信的延迟

当和另外一个外部区块链通信，区块生产者必须等到直到100%确定性，一笔交易被其它链不可逆的确认，在接受它作为有效输入之前。用基于EOS.IO 软件的区块链，每0.5s一个区块的DPOS，额外的拜占庭容错不可逆性，这大概需要0.5秒。如果任何区块链生产者不等不可逆性，它像依赖于存款的交易，晚点会被撤销，能影响区块链共识的有效性。EOS.IO软件使用 DPOS和aBFT去提供快速的不可逆。

### 完整的证明

当使用从外在的区块链的默克尔证明，知道所有的处理的交易是有效的，和知道没有交易被跳过或忽略，有重大的不同。当不可能证明所有的最近的交易被知道，可以证明在交易历史上没有间隔。EOS.IO软件实施这个，通过给发给给每个账户的的每个行动赋予一个序列号。用户可以用序列号证明所有用于一定账户的所有行动被处理，他们被按次序处理。

### 隔离见证

隔离见证(SegWit)的概念是，当交易被不可变的包含在区块链里，交易签名是不相关的。一旦它不可更改，签名数据可以被删减，其它人仍可以派生现在的状态。因为签名代表大部分交易的大比例，SegWit代表在硬盘使用和同步时间上的重大的存储。

相同的概念可以被用到用于区块链间通信的默克尔证明。一旦一个证明被接受，并且不可逆的登陆的区块链里。由证明使用的sha256 hashes的2KB不再有需要被用来派生合适的区块链状态。这种情况下的跨链通信，存储比常规签名快32倍。

另外一个SegWit的例子是Steem博客发帖，用这个模型，一个帖子仅包含sha256（博客内容），博客内容将在隔离见证数据里。区块生产者将验证内容存在，并给定哈希，但是博客内容不需要存储去从区块链日志中恢复当前状态。这使得证明可以，内容一旦被知道了，不需要永久存储已经知道的内容。

## 结论

EOS.IO软件从证明概念和最佳实践的经验来设计，代表在区块链技术上的根本的先进性。这个软件是总体蓝图的一部分，对于全局规模区块链社会，在上面去中心化应用可以被容易的部署和治理。









