**Ouroboros: 一个可证明安全的POS区块链协议**

Aggelos Kiayias*  Alexander Russell†  Bernardo David‡  Roman Oliynykov§

2017年8月21日

**摘要**

我们提出“Ouroboros”，第一个基于POS的带有严格的安全保证的区块链协议。相比通过bitcoin区块链协议完成的，我们为协议建立了安全的性能。因为协议提供了POS区块链纪律。相比基于物理资源证明的区块链（e.g, POW）,它提供了质的效率优势。我们也提出了一个新奇的用于激励POS协议的奖励机制，并且我们证明，考虑到这个机制，诚实的行为是一个近似的纳什均衡，使得像利己主义的挖矿无效。我们也通过提供在交易确认和处理的实验结果，来提出我们协议在真实世界设置下的初始的证据。

**1. 介绍**

关于基于POW的区块链协议-比如Bitcoin-操作的主要的考虑是执行所需要的能量。在写作的时间里，在bitcoin区块链上生成单个区块需要超过260此的哈希操作，会导致侵袭能源需求。实际上，早期的流通现实协议的能量需求比得上一个小国家。

事情的状态激发人们研究可以通过用其他能源效率更高的另外一个方式替代他，来避免需要POW替代的区块链协议,机制也能提供相似的保证。很重要的是要之处bitcoin的POW机制促进了一种类型的随机“领导人选择”过程，选择其中一个矿工去发行下一个区块。而且，如果所有的矿工都遵循这个协议，这个选择是以和每个矿工算例称比例的随机方式执行的。（来自这个协议的误差可能成比例的扭曲，由“自私的挖矿”策略例证）

一个自然的替代机制依赖于PoS的概念。不是矿工投资矿工为了参与领导选择过程，而是他们运行一个过程，随机的选择他们中的一个，和股份成比例的，每个过程根据当前区块链账簿。

实际上，这产生了自指的区块链纪律：维护区块链依赖于利益相关者自己，基于账簿中所报告的每个过程的质量的数量来给他们安排工作（和奖励）。除了这个之外，这个纪律部需要对利益相关者进行进一步的“人造的”计算需求。在某种意义上，这个听上去很理想；但是意思到这样的PoS协议显得涉及到许多定义上的，技术的和分析的挑战。

**先前的工作** PoS概念在bitcoin论坛曾被广泛的讨论。基于PoS的区块链涉及层被Bentov et al更加正式的研究国，既在和PoW连接方面，也在作为区块链协议单独的机制。尽管Bentovet al.展示了针对一些种类的攻击他们的协议是有效的，他们没提供一个正式的依赖精确的定义的模型，用于分析基于PoS的协议或安全证明。对于许多加密货币，探索性的基于PoS的协议被提出（和实施）。基于探索性的安全论证，这些加密货币并频繁的发现从安全的观点上是有缺陷的。参照【4】作为一个各种攻击的讨论。

对于一个基于PoS的区块链协议与一个依赖固定权威这集合的经典的共识区块链也是很有意思的。区分基于PoS的区块链协议与那些假设静态的当局这的是抵押随着时间变化，因此信任假设随着系统进化。

另外一个PoW的替代是空间证明的概念，在区块链协议的背景下被特别的研究。在一个空间证明设置里，一个“证人”希望证明对空间的使用（存储/内存）；正如在PoW的情况，这个使用了物理资源，但是随着时间需要的能量少一些。一个相关的概念是空间-时间证明（PoST）。在所有的这些情况，但是一个昂贵的物理资源（存储或算力）是必要的

**PoS设计挑战** 对于基于PoS的区块链协议的基础的问题是去模拟领导选择过程。为了在利益相关者中达到一个公平的随机的选择，熵必须引入到系统力，引入熵的机制可能易于被对手操纵。例如，一个控制足足利益相关者的对手可能尝试模拟协议执行，尝试利益相关者参与者的不同的序列。这样找到一个有利于对手的利益相关者的协议附加部分。这会导致所谓的“无休止的”弱点，对手方可能用计算资源去倾斜领导者选择。

**我们的结果** 我们提出“Ouroboros”，一个可证明的安全的PoS系统。据我们所知，这是第一个有严格的安全分析的这种类型的区块链协议。更详细的，我们的结果如下。

第一，我们提供了一个模型，是的认识到基于PoS区块链协议的这个问题正式化。我们介绍的这个模型是本着 一个健壮的交易账簿的两个正式的性能，集中于持续和活跃性的精神。持续表述一旦系统的一个声明一个特定的交易为“稳定的”，剩下的节点，如果诚实的询问和回应，也会将起报告为“稳定的”。此时，稳定性被理解为一个谓语，由一些安全参数k表示，将影响确定性，那个性质保持。（例如，超过k阻止深处）。活跃性确保，一旦真诚的生成的交易可以实现为一个充足的时间足够的数量到网络节点，比如u时间步数，将会是稳定的。活跃性和持续性的结合提供了一个健壮的账簿，从某种意义上说，生成的交易被采用，并且变得不可变的。我们的模型适宜的被修改去促进基于PoS的动力学。

第二，我们描述了一个基于PoS的新奇的区块链协议。我们的协议假定当事人可以自由的创建账户和接受和支付，那个质押随着时间转换。我们使用一个（非常简单的）安全的掷硬币协议的的多党实施去生成领导选择过程的随机性。区分我们的方式（和阻止所谓的“无休止攻击”）和其他之前的解决方式是价值确定的基于区块链的当前状态或使用共同的掷硬币作为引入熵的方式。并且，对我们的方式是独特的是系统忽略循环到循环的质押修改。反而，会定时利益相关者的当前集合进行定期快照，间隔被称作"epochs";在每个这样的间隔里，会进行一个而安全的多党的计算，使用区块链本身作为广播渠道。特别地，在每个时间点上，一组从委员会随机选择出来的利益相关者，然后负责执行掷硬币协议。协议的结果决定在一个时间点执行协议的下一组利益相关者，和所有领导选择的结果一样，用于时间点。

第三，我们提供一组正式的自变数，确立没有对手方可以打破持续和活跃性。在一些看似可信的假设下，我们的协议是安全的:(1)网络是同步的，从某种意义上来说，一个上限可以被决定，在任何诚实的利益相关者可以和任何其他利益相关者沟通，(2)一些从诚实的多数中提取的一些利益相关者是可能的，当需要参与每个间隔时,(3)利益相关者不会长时段的保持离线，（4）腐败自适应从属于一个小的延迟，在轮线性衡量，在安全的参数（或替代的，选手可以访问一个发送者匿名的广播渠道）。在我们安全参数的核心是该类型的参数，根据一个组合的概念“可分叉的线”，我们规划，证明，并且也用实验方法验证。在我们的分析里，我们也区分转换共i，一种一般分叉攻击的特别种类。这里的“转换性”本着转换跌收，针对安全多党的计算协议的精神，敌方像打破这个协议，但是更喜欢不被抓到做这个。我们展示秘密地分叉串是带有更小密度的分叉串的子类；这允许我们提供两个由区别的安全参数，完成不同的折中，依照效率和安全保障。我们分叉的串分析是一个自然的，相当的普遍的工具，可以被作为PoS设置的安全参数的一部分应用。

第四，我们把我们的注意力转移到协议的激励结构。我们展示一个新的奖励机制，用于激励这个系统的参与这，我们证明起（近似于）纳什均衡。在这个方式，攻击像区块阻挡和自私挖矿会被我们的设计减轻。奖励机制背后的核心理念是去提供积极的报酬给协议行动，不能被从协议中分叉的参与方的联合扼杀。在这个方式下，可能展示这个，在貌似可信的假设下，也记忆是一定的协议执行诚实是小的，忠诚的遵循协议是一个均衡，当所有的选手是理性的。

第五，我们引入了质押委托机制，可以无缝的加入到我们区块链协议。委托是非常有用的，在我们的内容中，当我们允许协议去扩展，甚至在一种设置里，一组利益相关者是高度分裂的。在这样的情况下，委托机制使得利益相关者去委托他们的“投票权”，例如，在每个时间点参与运行领导选择协议委员会的权利。在流动性民主，（亦称，委托的民主），利益相关者由能力撤回委托任命，当他们想相互独立。

考虑到我们模型和协议描述，我们也探索可在实际中多种多样的攻击，在我们的框架内被解决。特别的，我们讨论了双花攻击，交易拒绝攻击，51%攻击，没有质押，去同步化攻击和其他。最后，我们展示了冠以我们涉及的效率的证据。第一我们考虑双花攻击。为了说明目的，我们和中本聪关于bitcoin的分析进行了一个对比，关于带有确认99.9%的交易确认时间。反对转换敌手，交易确认时间比bitcoin快10到16倍，依赖于敌对的哈希算例；对于一般的敌手确认时间，有5到10倍快。而且，我们对于双花攻击的具体分析依赖于我们的分叉和密密地分叉串的组合，并且应用到一个更加广阔敌对行为的种类，相比中本聪的更加简化的分析。我们然后调查了我们的原型实施和在Amazon云计算上进行的基准测试的报告，可以展示我们的PoS区块链协议的力量 ，依照性能。

**相关工作** 与开发我们的Ouroboros同步，一些其他协议也真被开发，用来针对多种位置，在基于PoS的分布式账簿的设计空间里。睡眠的共识认为一个固定的利益相关者分布（例如，质押不会随着时间进化），目标为一个“混合的”腐败设置，敌手被允许去适应和执行失败终止，除了拜占庭错误恢复腐败。这个实际上简单的扩展到偶们在混合的腐败设置里的分析，cf.备注2；然而，结果的安全可以被争论，仅仅在“带延迟的腐败”的设置，因此不是完全的可适应的。Snow White [7] addresses an evolving stakeholder distribution and us

