ChainLink

一个去中心化的Oracle网络

Steve Ellis, Ari Juelsy, and Sergey Nazarov

2017年9月4日（v 1.0）

**摘要**

智能合约已经准备就绪去彻底改变许多行业，通过取代需求，对于传统的法律协议和在中心地自动化的数字协议。性能验证和执行仅仅依赖手动操作，从订阅的参与方中的一个，或者一个自动地系统，以编程方式检索和更新相关变化。不幸地是，因为他们基础的共识协议，运行智能合约的区块链不能支持和外部系统与生俱来的通信。

今天，这个问题的解决方案是去采用一个新的功能，被称作oracle,提供与外部世界的连接。现行的orcale是中心化的服务。任何使用这样服务的智能合约有失败的单点，使得其不必传统的中心化地运行数字协议安全。

在本文中，我们展示Chainlinlk,一个去中心化的oracle网络。我们描述链上组件，Chainlin提供的，对于合约去获得外部的连接性，软件为网络的节点赋能。我们展示一个简单的链上合约数据聚合系统和，一个更加高效的链下共识机制。我们也描述支持名誉和安全监控服务，对于Chainlink,帮助用户做有根据的提供者选择和完成强健的服务，即使在侵略地敌对情况。最后，我们描绘一个理想的oracle的性质，作为我们安全策略的指导，安排可能的未来的改进，包含完全地特定的orace编程，数据源基础设施修改，和机密的智能合约执行。

**目录**

1. 介绍

2. 架构的综述

   2.1 链上架构

   2.2 链下架构

3. Oracle安全

4. Chainlink去中心化方式

   4.1 分配的源

   4.2 分配的oracle

5. Chainlink安全服务

   5.1 验证系统

   5.2 名誉系统

   5.3 证书服务

   5.4 合约升级服务

   5.5 LINK token使用

6. 长期的技术策略

   6.1 机密性

   6.2 基础设施变化

   6.3 链下计算

7. 现行的Oracle解决方案
8. 结论

  A 链下聚合

​     A.1 OCA协议

​     A.2 证明梗概

​     A.3 讨论

B SGX 信任假设

**1 介绍**

智能合约是在去中心化的基础设施上执行的应用，例如区块链。他们可以防止篡改，从某种意义上说，没有参与方（及时他们的创作者）可以梗概他们的代码或者干涉他们的执行。在过去，以代码体现的合约以中心化的方式运行，使得他们可以遭到梗概，终止，甚至删除，由特权参与方执行。与此相反，智能合约的执行确保，约束所有参与方到一个协议，如写出来的，创造一个新的和强有力的类型，信任关系，不需要依赖信任，任何一方。因为他们是自我验证和自我执行的（例如上面解释的防篡改），智能合约因此提供一个出众的工具，对于意识到和管理数字资产。

强大的新的信任模型，智能合约体现，虽然，提出一个新的技术挑战：连通性。大多数智能合约应用依赖的关于真实世界的数据，来自关键的来源，特别地数据实时更新服务和APIs,在区块链外部。因为共识机制的结构支持区块链，一个区块链不能直接取来这样的决定性的数据。

我们提出一个针对智能合约连通性问题的解决方案，以Chainlink的形式，一个安全的oracle网路。Chainlink和其他oracle解决方案不同的地方是他作为一个完全地去中心化的网络操作。这个去中心化的方式限制在任何单个参与方的信任，使得不可篡改的品质，在智能合约里有价值，被扩展到首尾相连的操作，在智能合约和他们所依赖的APIs。使得智能合约外部地意识到，意味着有能力和链下自愿交互，是必要的，如果他们将替代今天在使用中的数字协议。

今天，名人的分享，传统的合约协议，数字化地自动的使用外部数据去证明合约的履行，需要数据输出去送到外部的系统。当智能合约替代这些较旧的合约机制，他们将要求高保证的版本，数据输入输出的相同类型。潜在的下以带智能合约的例子，他们的数据要求包括：

- 安全智能合约，比如债券，利率衍生品，和需要其他需要访问APIs,报告市场价格和市场，参考数据，例如，利率
- 保险智能合约，需要实时数据更新服务，关于IoT数据，和有疑问的可保险的事物有关的，例如,在违约事件，仓库的磁门是否关闭，仓库的防火墙在线，或者你有保险的班机是否按时到
- 交易金融智能合约将需要装货的GPS数据，来自供应链ERP系统的数据，被允许的货物的海关数据，为了确认合约义务的履行

这些例子的另外一个共同的问题是，对于智能合约，无能力输出数据到链下系统。这样的数据经常用支付消息的形式，发送到中心化的基础设施，用户已经有账户，例如银行支付，PayPal,和其他支付网络。ChainLink安全的把数据送的APIs的能力，各种遗留问题系统，代表合约，允许外部意思到防篡改的合约的创建。

**白皮书路线图**

在这个白皮书，我们回顾了ChainLink架构（章节2）。我们然后解释我们如何定义对于oracle的安全性（章节3）。我们描述Chainlink方式，对于oracle去中心化化/分布,和数据源（章节4），遵循一个讨论，四种安全服务，由chainlink提议的，和LINK token所起的作用（章节5）。我们然后描述一个建议的长期的发展策略，包含更好的机密性保护，信任的硬件的使用，基础设施改变，一般的oracle的可编程性（章节6）。我们简沦的回顾替代的oracle设计（章节7），以一个断的讨论做结论，设计原则和哲学，指导Chainlink发展（章节8）

**2. 架构综述**

Chainlin的核心的功能的目标是去两种环境之间架桥：链上和链下。我们描述每个ChainLink组件的架构，如下。ChainLink最初会在Ethereum上建立，但是我们打算，对于它，支持所有主要的智能合约网络，对于链下和跨链交流。在它的链上和链下版本，ChainLink被设计，带有模块性在心里。ChainLink系统的每一块都是可以升级的，因此不同的组件可以被替代，当更高的技术和竞争的实现出现。

**2.1 链上架构**

作为一个oracle服务，ChainLink节点返回回复到数据请求或查询，代表用户合约，我们称作请求合约，命名为USER-SC。ChainLink的链上界面，对于请求合约是他自己，一个链上合约，表示为CHAINLINK-SC.

在CHAINLINK-SC背后，ChainLink由一个链上组件，包含三个主要的合约：一个名誉合约，一个顺序匹配合约，一个集合合约。名誉合约跟踪oracle服务提供者绩效度量。顺序-匹配智能合约拿一个建议的服务水平协议，记录SLA参数，从oracle提供者处收集出价。它然后选择出价，使用名誉合约，完成oracle SLA。集合合约收集orale提供者的回复，计算最后Chainlink查询的共同的结果。也为oracle提供者度量标准，返回进名誉合约。ChainLink河北以一个模块化的方式设计，允许他们被安装，或者提供，被用户，按照需求。链上工作流程有三步：1)orale选择 2)数据报告 3)结果集合

**Oracle选择** 一个oracle服务购买者详细说明要求，组成一个服务标准协议（SLA）提议，包含详情，比如查询参数和oracle的数量，购买者所需要的。此外，购买这种详细说明名誉和集合的合约，用用到协议的剩余部分。

使用链上维持的名誉，和更强健的数据集，从过去的合约记录里收集的，购买者可以手动地分类，过滤，和选择oracle,通过链下列出的服务。我们的目的是，对于ChainLink,去位置一个这样的列表服务，收集所有的ChainLink相关的记录，和验证论处的oracle的二进制的。我们进一步详述列表服务和名誉系统，在章节5。用来生成列表的数据是从区块链获得的，允许替代的oracle列表服务被建立。购买者将提交SLA提议到oracle链下，达成协议，在链上完成SLA之前。

人工的匹配不是对所有的情况都是可能的。例如，一个合约可能需要去氢气球orace服务动态地，回应它的负担。自动的解决方案解决这个问题，增强可用性。对于这些原因，自动的oracle匹配时被ChainLink提出，通过排序匹配合约的使用。

一旦购买者详细说明他们的SLA提议，而不是直接联系oracle，他们将提交SLA到一个顺序-匹配合约。提议提交到顺序-匹配合约促发一个记录，oracle提供者能够监测，和过滤，基于他们的能力和服务目标。ChainLink节点然后选择是否对提议出价，带有合约，仅仅接受出价，从节点，满足SLA的要求。当一个oracle服务提供者在一个合约里出价，他们承诺给它，特别地，通过附加一个罚金数量，会被损失，由于他们的不正当举止，如在SLA中的定义的。

投标会被接受，对于出价窗口的全部。一旦SLA已经收到足够的合格的投标，投标窗口关闭，oracle的请求的数量从投票池中选择。罚金支付被提供的，在投票过程中，返还会给未被选择的oracle,一个完成的SLA记录被创建。当完成的SLA被记录，它触发一个记录，通知被选择的oracle。oracle然后执行SLA中详细描述的任务。

**数据报告** 一旦新的oracle记录被创建，链下oracle执行协议，报告回到链上，更多关于链下交流的详情，参照章节2.2 和 4

**结果集合** 一旦oracle显示他们的结果到oracle合约，他们结果会被喂到集合合约。集合合约计算共同的结果，并计算一个加权的答案。每个oracle回复的有效性然后报告给名誉合约。最后，权重的答案返回给在USER-SC中的指定的合约功能。

检测到无关的或不正确的值时一个问题，针对数据喂食和应用的每个类型而言。例如，检测和拒绝无关的回答，在算平均数之前可能是必要的，对于数字数据，但不是布尔数据。对于这个原因，将会有一个特定的集合合约，但是一个可配置的合约地址，由购买者指定。ChainLink将包括一个集合合约的标准的集，但是定之的合约可能也被指定，如果他们符合标准计算接口。

**2.2 链下架构**

链下，ChainLink最初包含一个oracle节点的网络，连接到Ethereum网络，我们打算对于它去支持所有的主要的智能合约网络。这些节点独立地得到回复到链下请求。如我们下面解释的，他们个人的回复会被集合，通过若干可能的共识机制中的一个，到一个全局的回复，被返回给一个请求的合约USER-SC.ChainLink结构由标准的开源核心实施提供动力，处理标准的区块链交流，时序安排，连接普通的外部资源。节点操作者可能选择去增加软件扩展，被称之为外部适配器，允许操作者去提供额外的专业的链下服务。ChainLink节点已经被部署，在公链和私有网络，在公司设置；使得节点以一个去中心化的方式运行，是对于ChainLink网络的动机。

**ChainLink核心** 核心节点软件负责与区块链连接，安排，平衡工作，在不同的外部服务之间。ChainLink节点完成的工作格式为任务。每个任务是一个较小的工作规格集，被称为子任务，被作为一个管道处理。每个子任务由它执行的特定的操作，在传递它的结果到下个子任务之前，最终达到最后的结果。ChainLink的节点的软件里带有内置的一些子任务，包括HTTP请求，JSON解析，转换为各种区块链格式。

**外部的适配器** 在内置的子任务类型之外，定之的子任务可以被创建适配器定义。适配器是外部的服务，带有最小的REST API.通过塑造适配器，在一个面向对象的方式，程序，以任何编程语言，可以被容易的实施，仅仅通过增加一些小的中间的API，在程序前面。类似的，和复杂的多步的API交流，能够被简化为单个的子任务，带有参数。

**子任务计划** 我们预料许多适配器是开源的，所有服务可以被审计，由各个社区成员运行。带有许多不同的适配器类型，由不同的开发者开发，确认适配器兼容性是必要的。

ChainLink现在操作带有一个计划系统，基于JSON模式，去指定每个适配器需要的输入，他们如何应该被格式化。类似地，适配器指定一个输出模式去描述每个子任务输出的格式。

















